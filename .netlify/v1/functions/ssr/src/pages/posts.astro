---
import Layout from '../layouts/Layout.astro';
import PostCard from '../components/PostCard.astro';  // Asegúrate de que tienes un componente PostCard

// Obtener todos los archivos Markdown en la carpeta `content/posts`
const posts = await Astro.glob('../content/posts/*.md');

// Ordenar los posts por fecha (si existe en el frontmatter)
posts.sort((a, b) => new Date(b.frontmatter.date).getTime() - new Date(a.frontmatter.date).getTime());
---

<Layout title="Posts">
    <h1>Aquí se muestran todos los posts</h1>

    <!-- Verifica si hay posts -->
    {posts.length === 0 ? (
        <p>No hay posts disponibles</p>
    ) : (
        <section class="posts-grid">
            {posts.map(post => (
                <PostCard
                    title={post.frontmatter.title}
                    date={post.frontmatter.date}
                    slug={post.url} 
                    excerpt={post.frontmatter.excerpt}
                    image={post.frontmatter.image}
                    category={post.frontmatter.category}
                />
            ))}
        </section>
    )}
</Layout>
