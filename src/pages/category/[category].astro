---
import Layout from "../../layouts/Layout.astro";
import PostCard from "../../components/PostCard.astro";
import { getCollection } from "astro:content";

const { category } = Astro.params;

// Obtener todos los posts
const posts = await getCollection("posts");

// Filtrar los posts por categoría
const filteredPosts = posts.filter(
  (post) => post.data.category.toLowerCase() === category.toLowerCase()
);
---

<Layout title={`Posts en la categoría: ${category}`}>
  <h1 style="text-align: center">Posts en la categoría: {category}</h1>
  <br />

  <section class="category-posts">
    {
      filteredPosts.map((post) => (
        <PostCard
          title={post.data.title}
          date={post.data.date.toISOString()}
          slug={post.slug}
          excerpt={post.data.excerpt}
          image={post.data.image}
          category={post.data.category}
        />
      ))
    }
  </section>

  <div class="view-all-container">
    <a href="/posts" class="view-all-button">Ver todos los posts</a>
  </div>
</Layout>

<style is:global>
  /* Contenedor de la lista de categorías */
  section {
    display: flex;
    flex-direction: column;
    gap: 2rem; /* Añade separación entre las tarjetas */
    padding: 2rem;
  }

  /* Estilos individuales para cada categoría */
  .post-card {
    padding: 1.5rem;
    background-color: #fff; 
    border: 4px solid #0b0b0b !important; 
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); 
    transition:
      transform 0.3s ease,
      box-shadow 0.3s ease; 
  }

  /* Efecto hover para resaltar la categoría */
  .post-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2); /* Sombra más pronunciada en hover */
  }

  /* Asegúrate de que las imágenes y el contenido dentro de la CategoryCard estén bien espaciados */
  
</style>
